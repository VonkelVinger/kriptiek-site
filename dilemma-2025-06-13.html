<!DOCTYPE html>
<html lang="af">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DILEMMA – Kriptiek</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Montserrat', sans-serif; background-color: #f8f5f2; }
    .tile {
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 1.2rem;
      margin: 2px;
      background: #fff;
      border: 1px solid #901c1a;
      color: #000;
    }
    .tile.flip {
      transition: background 0.3s ease;
    }
    .row {
      display: flex;
      justify-content: center;
      margin-bottom: 5px;
    }
    .keyboard-button:hover {
      background: #a5312f;
      color: white;
      cursor: pointer;
    }
    .logo-container {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      width: fit-content;
      margin: 1rem auto;
      padding: 1rem;
      border-radius: 1rem;
      background-color: white;
      overflow: hidden;
    }
    .crossword-grid {
      display: grid;
      grid-template-columns: repeat(8, minmax(40px, 1fr));
      gap: 4px;
      position: relative;
      z-index: 10;
    }
    .letter-box {
      width: 50px;
      height: 50px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #374151;
      color: white;
      font-size: 1.8rem;
      font-weight: bold;
      border: 2px solid #1f2937;
      border-radius: 0.375rem;
      text-transform: uppercase;
      box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
    }
    .flipped-k { transform: scaleX(-1); }
    .background-crossword {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(30px, 1fr));
      grid-template-rows: repeat(auto-fill, minmax(30px, 1fr));
      opacity: 0.5;
      z-index: 1;
      pointer-events: none;
    }
    .bg-letter-box {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.1rem;
      font-weight: bold;
      color: #9ca3af;
      border: 1px solid #e5e7eb;
      background-color: transparent;
      user-select: none;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4">
  <header class="w-full bg-white shadow p-4 mb-6 text-center">
    <div class="logo-container">
      <div id="backgroundCrossword" class="background-crossword"></div>
      <div class="crossword-grid">
        <div class="letter-box flipped-k">K</div>
        <div class="letter-box flipped-k">R</div>
        <div class="letter-box">I</div>
        <div class="letter-box flipped-k">P</div>
        <div class="letter-box">T</div>
        <div class="letter-box">I</div>
        <div class="letter-box flipped-k">E</div>
        <div class="letter-box">K</div>
      </div>
    </div>
  </header>

  <main id="dilemma-container" class="w-full max-w-md bg-white border-2 border-[#901c1a] p-6 shadow">
    <h2 class="text-xl font-bold text-center mb-4">13 Junie 2025 se woord: 9 letters:</h2>
    <div id="grid" class="mb-4"></div>
    <div id="keyboard" class="text-center mb-2"></div>
    <p id="message" class="text-center text-gray-600 mt-2"></p>
    <section class="mt-8 text-sm text-gray-800">
      <h3 class="text-lg font-bold mb-2">Hoe om te speel</h3>
      <p class="mb-2">Jy het ses kanse om die woord te raai.</p>
      <p class="mb-2">Jy mag vir elke probeerslag enige letters in enige volgorde kies, maar elke raaiskoot moet dieselfde aantal letters hê as die woord waarna jy soek. Dit hoef nie ook 'n woord te vorm nie. 'n Raaiskoot met minstens 'n paar klinkers is dus 'n goeie begin.</p>
      <p class="mb-2">Gebruik jou toetsbord of die een op die skerm om jou raaiskoot in te tik, dan ENTER.</p>
      <p class="font-semibold mt-4">Wat beteken die kleure nadat jy geraai het?</p>
      <ul class="list-disc list-inside">
        <li><span class="text-green-700 font-semibold">GROEN</span>: Die letter is in die woord én in die regte posisie.</li>
        <li><span class="text-orange-600 font-semibold">ORANJE</span>: Die letter is wel in die woord, maar nie hier in die regte posisie nie.</li>
        <li><span class="text-yellow-500 font-semibold">GEEL</span>: Die letter is meer as een keer in die woord, maar nie hier in die regte posisie nie.</li>
        <li><span class="text-gray-500 font-semibold">GRYS</span>: Die letter is glad nie in die woord nie.</li>
      </ul>
    </section>
  </main>

  <footer class="bg-white shadow p-4 text-center text-sm text-gray-500 mt-10">
    &copy; 2025 Kriptiek. Alle regte voorbehou. |
    <a href="/privacy.html" class="underline">Privaatheidsbeleid</a> |
    <a href="/terms.html" class="underline">Voorwaardes</a> |
    <a href="/terms.html" class="underline">Gereelde vrae</a> |
    <a href="/terms.html" class="underline">Oor Kriptiek</a> |
    <a href="/terms.html" class="underline">Kontak ons</a>
  </footer>

  <div id="popup-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
    <div id="popup" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#f8f5f2] border-2 border-[#901c1a] p-6 text-center max-w-xs shadow">
      <p id="popupText" class="font-bold text-[#a5312f] text-xl"></p>
      <button onclick="copyResult()" class="mt-4 bg-[#a5312f] text-white px-4 py-2">DEEL / SHARE</button><br>
      <button onclick="document.getElementById('popup-overlay').classList.remove('show')" class="mt-3 border-2 border-[#a5312f] text-[#a5312f] font-bold px-4 py-1">SLUIT</button>
    </div>
  </div>

  <script>
    const backgroundCrossword = document.getElementById("backgroundCrossword");
    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    function getRandomLetter() {
      return letters[Math.floor(Math.random() * letters.length)];
    }
    function generateBackgroundGrid() {
      backgroundCrossword.innerHTML = '';
      const numRows = Math.ceil(backgroundCrossword.offsetHeight / 30);
      const numCols = Math.ceil(backgroundCrossword.offsetWidth / 30);
      const totalCells = (numRows * numCols) || 300;
      for (let i = 0; i < totalCells; i++) {
        const bgLetterBox = document.createElement('div');
        bgLetterBox.classList.add('bg-letter-box');
        bgLetterBox.textContent = getRandomLetter();
        backgroundCrossword.appendChild(bgLetterBox);
      }
    }
    generateBackgroundGrid();
    window.addEventListener('resize', generateBackgroundGrid);
  </script>

  <script>
    (function () {
  const DAILY_WORD = "DWAALSPOOR";
  const WORD_LENGTH = DAILY_WORD.length;
  const MAX_GUESSES = 6;
  const STORAGE_KEY = `dilemma-${new Date().toISOString().split("T")[0]}`;
  const colors = {
    correct: "#15803d",
    present: "#ea580c",
    multiple: "#facc15",
    absent: "#6b7280"
  };

  let currentGuess = "";
  let guesses = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
  const grid = document.getElementById("grid");
  const message = document.getElementById("message");

  for (let i = 0; i < MAX_GUESSES; i++) {
    const row = document.createElement("div");
    row.className = "row";
    for (let j = 0; j < WORD_LENGTH; j++) {
      const tile = document.createElement("div");
      tile.className = "tile";
      row.appendChild(tile);
    }
    grid.appendChild(row);
  }

  const KEYS = [
    ["Q", "W", "E", "R", "T", "Y", "U", "I", "O", "P"],
    ["A", "S", "D", "F", "G", "H", "J", "K", "L"],
    ["ENTER", "Z", "X", "C", "V", "B", "N", "M", "⌫"]
  ];
  const keyboard = document.getElementById("keyboard");
  const keyButtons = {};

  KEYS.forEach(row => {
    const div = document.createElement("div");
    div.className = "flex justify-center mb-1";
    row.forEach(k => {
      const btn = document.createElement("button");
      const key = k === "⌫" ? "←" : k;
      btn.textContent = key;
      btn.className = "keyboard-button border-2 border-[#a5312f] text-[#a5312f] font-bold px-2 py-1 mx-1";
      btn.onclick = () => handleKey(k);
      keyButtons[k] = btn;
      div.appendChild(btn);
    });
    keyboard.appendChild(div);
  });

  updateGrid();

  function handleKey(key) {
    if (guesses.length >= MAX_GUESSES) return;
    if (key === "⌫") {
      currentGuess = currentGuess.slice(0, -1);
    } else if (key === "ENTER") {
      if (currentGuess.length !== WORD_LENGTH) {
        message.textContent = `Gebruik ${WORD_LENGTH} letters.`;
        return;
      }
      guesses.push(currentGuess);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(guesses));
      checkGuess(currentGuess);
      currentGuess = "";
    } else if (/^[A-Z]$/.test(key) && currentGuess.length < WORD_LENGTH) {
      currentGuess += key;
    }
    updateGrid();
  }

  function updateGrid() {
    const rows = grid.children;
    for (let i = 0; i < MAX_GUESSES; i++) {
      const tiles = rows[i].children;
      const guess = guesses[i] || "";
      for (let j = 0; j < WORD_LENGTH; j++) {
        const tile = tiles[j];
        tile.textContent = guess[j] || (i === guesses.length ? currentGuess[j] || "" : "");
        tile.classList.remove("flip");

        if (!guess || guess.length < WORD_LENGTH) continue;

        let letter = guess[j];
        let bg = colors.absent;
        const letterInWord = DAILY_WORD.includes(letter);
        const correctPosition = letter === DAILY_WORD[j];
        const letterMultiple = DAILY_WORD.split(letter).length - 1 > 1;

        if (correctPosition) {
          bg = colors.correct;
        } else if (letterInWord) {
          bg = letterMultiple ? colors.multiple : colors.present;
        }

        setTimeout(() => {
          tile.classList.add("flip");
          tile.style.background = bg;
          tile.style.color = "#fff";
          tile.style.border = `1px solid ${bg}`;
          if (keyButtons[letter]) {
            keyButtons[letter].style.background = bg;
            keyButtons[letter].style.color = "#fff";
            keyButtons[letter].style.border = `1px solid ${bg}`;
          }
        }, j * 200);
      }
    }
  }

  function checkGuess(guess) {
    if (guess === DAILY_WORD) {
      const word = guesses.length === 1 ? "raai" : "raaie";
      showPopup(`KORREK! Jy het dit in ${guesses.length} ${word} reggekry.`);
    } else if (guesses.length >= MAX_GUESSES) {
      showPopup("Jammer, probeer môre weer.");
    } else {
      message.textContent = "";
    }
  }

  function showPopup(text) {
    document.getElementById("popupText").textContent = text;
    document.getElementById("popup-overlay").classList.add("show");
  }

  window.copyResult = function () {
    const word = guesses.length === 1 ? "raai" : "raaie";
    const result = `Ek het vandag se DILEMMA 🧩 in *${guesses.length}* ${word} reggekry. Speel by www.kriptiek.com`;

    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(result).then(() => {
        alert("Jou telling is nou op jou Clipboard");
      });
    } else {
      const textarea = document.createElement("textarea");
      textarea.value = result;
      textarea.setAttribute("readonly", "");
      textarea.style.position = "absolute";
      textarea.style.left = "-9999px";
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand("copy");
        alert("Jou telling is nou op jou Clipboard");
      } catch {
        alert("Kopieer het misluk. Probeer asseblief self te kopieer.");
      }
      document.body.removeChild(textarea);
    }
  };

  document.addEventListener("keydown", (e) => {
    let key = e.key.toUpperCase();
    if (key === "BACKSPACE") key = "⌫";
    else if (key === "ENTER") key = "ENTER";
    else if (!/^[A-Z]$/.test(key)) return;
    handleKey(key);
  });
})();
  </script>
</body>
</html>
