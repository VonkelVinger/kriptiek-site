<!DOCTYPE html>
<html lang="af">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>BLITSTIEK – Kriptiek</title>

  <!-- Tailwind + font -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      --brand:#1e3a8a;
      --cell-bg:#004d40;   /* cell & chip colour */
      --gridW:320px;       /* updated by JS */
      --cell-font:16px;    /* updated by JS */
      --cellSize:32px;     /* per-cell size for gradients, updated by JS */
      --line:1px;          /* 1 device pixel in CSS px (set in JS) */
    }
    html,body{height:100%}
    body{font-family:'Montserrat',system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#f9fafb;color:#1f2937}

    /* HEADER */
    header{background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.08);padding:1rem;text-align:center;position:relative;}
    .logo-container{display:flex;justify-content:center;align-items:center;margin-bottom:10px;}
    .logo-container .letter-box{width:40px;height:40px;margin:2px;display:flex;justify-content:center;align-items:center;background:#374151;color:#fff;font-size:1.2rem;font-weight:700;border-radius:6px;}
    .welcome{font-size:.9rem;color:#6b7280}

    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.05);}
    .headline{text-align:center;font-size:1.125rem;font-weight:700;color:#374151;margin:16px 0 8px;}

    /* Target chips */
    #targetWrap{width:100%;max-width:var(--gridW);margin:0 auto 8px;display:flex;justify-content:center;}
    #target{display:inline-flex;gap:1px;background:var(--cell-bg);color:#fff;padding:2px;border-radius:6px;min-height:34px;align-items:center;}
    #target span{width:30px;height:30px;display:grid;place-items:center;font-weight:800;border:1px solid rgba(255,255,255,.12);}

    /* GRID — 1-device-px lines drawn ABOVE cells */
    #grid{
      position:relative;
      display:grid;
      grid-template-columns:repeat(8,1fr);
      grid-template-rows:repeat(10,1fr);
      gap:0;
      background:#fff;
      border:var(--line) solid #0c4a3e;
      border-radius:8px;
      overflow:hidden;
      width:var(--gridW);
      height:400px;
      margin:10px auto 8px;
    }
    #grid::after{
      content:''; position:absolute; inset:0; pointer-events:none; z-index:5;
      background:
        repeating-linear-gradient(to right,
          transparent 0 calc(var(--cellSize) - var(--line)),
          rgba(255,255,255,.28) 0 var(--cellSize)),
        repeating-linear-gradient(to bottom,
          transparent 0 calc(var(--cellSize) - var(--line)),
          rgba(255,255,255,.28) 0 var(--cellSize));
      background-position:0 0,0 0; background-repeat:repeat;
    }
    .cell{position:relative;background:var(--cell-bg);transition:transform .15s ease-out,opacity .15s ease-out;}
    .cell::after{content:none;}
    .cell.f{display:grid;place-items:center;color:#fff;font-weight:800;font-size:var(--cell-font);text-shadow:0 1px 1px rgba(0,0,0,.35);}
    .cell.pop{transform:scale(1.15);opacity:0;}

    /* Modals */
    #over{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);z-index:50;}
    .modal{background:#fff;border-radius:16px;box-shadow:0 20px 50px rgba(0,0,0,.2);width:min(92%,520px);padding:18px;text-align:center;border:1px solid #e5e7eb;}
    .btn{background:#1e3a8a;color:#fff;font-weight:700;padding:10px 16px;border-radius:10px;}
    .btn.gray{background:#6b7280}
    .btn:disabled{opacity:.6;cursor:not-allowed;}

    /* Controls */
    .controls{width:100%;max-width:calc(var(--gridW) - 2px);margin:8px auto 0;}
    .arrow-row{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;}
    .dir-btn{width:100%;aspect-ratio:1/1;min-width:56px;min-height:56px;display:flex;align-items:center;justify-content:center;background:#053a6b;color:#fff;border-radius:14px;font-weight:800;font-size:24px;}
    @media (min-width:460px){.dir-btn{min-width:64px;min-height:64px;font-size:26px}}
    @media (min-width:640px){.dir-btn{min-width:72px;min-height:72px;font-size:28px}}

    .pill{background:#0c4a3e;color:#fff;font-weight:700;padding:6px 10px;border-radius:8px;text-align:center;}
    #leaderboardList li{padding:.35rem .5rem;border-radius:.375rem;}
    #leaderboardList li:nth-child(odd){background:#f3f4f6;}
    #leaderboardList li:first-child{background:#d1fae5;font-weight:700;}

    /* Share dropdown — same as Dilemma */
    .share-menu-local{background:#fff;border:1px solid #e5e7eb;box-shadow:0 8px 24px rgba(0,0,0,.12);border-radius:.5rem;width:240px;padding:.5rem;z-index:3000;}
    .share-menu-local button{width:100%;text-align:left;padding:.5rem .75rem;border-radius:.375rem;font-weight:600;}
    .share-menu-local button:hover{background:#f3f4f6;}

    /* Tile images + N-R gate */
    .btn-img{border-radius:12px;box-shadow:0 6px 15px rgba(0,0,0,.25)}
    .btn-img:hover{transform:translateY(-1px);filter:brightness(1.02)}
    .btn-img:active{transform:translateY(0);filter:brightness(.98)}
    #nrGate{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);z-index:60;}
  </style>
</head>
<body class="min-h-screen flex flex-col">

  <!-- HEADER -->
  <header>
    <div class="logo-container" aria-label="BLITSTIEK">
      <div class="letter-box">B</div><div class="letter-box">L</div>
      <div class="letter-box">I</div><div class="letter-box">T</div>
      <div class="letter-box">S</div><div class="letter-box">T</div>
      <div class="letter-box">I</div><div class="letter-box">E</div>
      <div class="letter-box">K</div>
    </div>
    <p class="welcome" id="welcomeLine">Welkom terug, <span id="playerName" class="font-semibold text-green-700">Speler</span>!</p>
  </header>

  <main class="flex-1">
    <div class="max-w-3xl mx-auto px-4 py-4">

      <div class="headline">TEIKENWOORD:</div>
      <div id="targetWrap"><div id="target"><span>—</span></div></div>

      <!-- GAME card -->
      <section class="card p-4">
        <div class="relative">
          <div id="grid"></div>

          <!-- Success modal -->
          <div id="over">
            <div class="modal">
              <p id="winMsg" class="mb-3 text-base"></p>
              <div class="actions" style="display:flex;gap:.75rem;justify-content:center;margin-top:12px;">
                <div class="relative">
                  <button id="modalShareBtn" type="button" class="btn">DEEL</button>
                  <!-- dropdown under modal DEEL -->
                  <div id="shareMenu" class="hidden share-menu-local absolute left-1/2 -translate-x-1/2 mt-2">
                    <div class="px-2 pb-1 text-xs uppercase tracking-wide text-gray-500">Deel via</div>
                    <div class="space-y-1">
                      <button id="mWhatsApp" type="button">WhatsApp</button>
                      <button id="mCopy" type="button">Kopieer skakel</button>
                      <button id="mSystem" type="button">Stelsel-deel</button>
                    </div>
                  </div>
                </div>
                <button id="modalCloseBtn" type="button" class="btn gray">SLUIT</button>
              </div>
            </div>
          </div>

          <!-- N-R gate -->
          <div id="nrGate">
            <div class="modal">
              <h3 class="text-lg font-extrabold mb-1">WELKOM BY BLITSTIEK OP KRIPTIEK</h3>
              <p class="text-sm text-gray-600 mb-3">Jou opsies:</p>
              <div class="text-left space-y-2 text-gray-700">
                <p><strong>1)</strong> Speel Blitstiek as 'n ongeregistreerde speler met beperkte funksies.</p>
                <p><strong>2)</strong> <a href="/register.html" class="underline" id="gateRegLink">Registreer</a> sodat jy volle toegang tot alles op Kriptiek kan kry, insluitend Blitstiek.</p>
              </div>
              <div class="flex gap-2 justify-center mt-4">
                <button id="gateGuestBtn" class="btn">Speel sonder om te registreer</button>
                <button id="gateRegBtn"   class="btn gray">Registreer</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Arrows -->
        <div class="controls mt-3">
          <div class="arrow-row">
            <button id="btnLeft"  class="dir-btn" aria-label="Links">◀</button>
            <button id="btnDown"  class="dir-btn" aria-label="Laat val">▼</button>
            <button id="btnRight" class="dir-btn" aria-label="Regs">▶</button>
          </div>
        </div>

        <!-- Actions -->
        <div class="controls mt-3 flex items-center justify-center gap-2">
          <button id="btnStart" class="btn">BEGIN</button>
          <button id="btnPause" class="btn gray">POUSE</button>

          <!-- Sticky share + dropdown -->
          <div class="relative">
            <button id="stickyShareBtn" class="btn hidden">DEEL</button>
            <div id="stickyShareMenu" class="hidden share-menu-local absolute left-1/2 -translate-x-1/2 mt-2">
              <div class="px-2 pb-1 text-xs uppercase tracking-wide text-gray-500">Deel via</div>
              <div class="space-y-1">
                <button id="sWhatsApp" type="button">WhatsApp</button>
                <button id="sCopy" type="button">Kopieer skakel</button>
                <button id="sSystem" type="button">Stelsel-deel</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Timers -->
        <div class="controls grid grid-cols-2 gap-2 mt-3">
          <div id="timeBox" class="pill">Jou tyd: <b>00:00</b></div>
          <div id="bestBox" class="pill">Beste tyd: <b>--:--</b></div>
        </div>

        <!-- ACTION BAR -->
        <div class="controls mt-3 flex items-center justify-center gap-3" id="actionBar">
          <!-- N-R: Register -->
          <a id="btnRegister" href="/register.html">
            <img class="btn-img" src="/assets/K_REGISTREER_12SEP.png" alt="Registreer" width="150" height="150">
          </a>
          <!-- R: Gesels -->
          <a id="btnGesels" href="/forum.html" class="hidden">
            <img class="btn-img" src="/assets/K_GESELS_12SEP.png" alt="Gesels" width="150" height="150">
          </a>
          <!-- Both: Share (yellow) with its own dropdown (same style as Dilemma) -->
          <div class="relative">
            <button id="tileShareBtn" type="button" title="Deel">
              <img class="btn-img" src="/assets/SHARE_12SEP.png" alt="Deel" width="150" height="150">
            </button>
            <div id="tileShareMenu" class="hidden share-menu-local absolute left-1/2 -translate-x-1/2 mt-2">
              <div class="px-2 pb-1 text-xs uppercase tracking-wide text-gray-500">Deel via</div>
              <div class="space-y-1">
                <button id="tWhatsApp" type="button">WhatsApp</button>
                <button id="tCopy" type="button">Kopieer skakel</button>
                <button id="tSystem" type="button">Stelsel-deel</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- HOE OM TE SPEEL (unchanged) -->
      <section class="mt-4 bg-white rounded shadow p-4">
        <h2 class="text-xl font-bold mb-2">HOE OM TE SPEEL</h2>
        <ol class="space-y-3 text-gray-700 leading-relaxed">
          <li>
            <p class="font-semibold">1. Doel</p>
            <p>Probeer om die <strong>teikenwoord</strong> boaan so vinnig as moontlik te vorm deur die vallende blokke, elkeen met 'n lukraakte letter en kleur, links en regs te skuif voordat hulle onder land. Die teikenwoord moet in <strong>dieselfde horisontale ry</strong> gevorm word, sonder gapings of verkeerde letters. Laat val onnodige letters eenkant, of gebruik die blokreëls onder om hulle te laat verdwyn. Daar is <strong>elke dag ’n nuwe woord</strong>, wat soms minder maar nooit meer as 8 letters sal hê nie.</p>
          </li>
          <li>
            <p class="font-semibold">2. Kontroles</p>
            <p><strong>Fisieke toetsbord:</strong> Gebruik die pyltjies op jou toetsbord om die blokke links en regs te skuif, en die spasiebalk om die blok dadelik tot onder te laat val.</p>
            <p><strong>Raakskerm:</strong> Gebruik die pyltjies op die skerm om die blokke links en regs te skuif, en die af-pyltjie om die blok dadelik tot onder te laat val.</p>
          </li>
          <li>
            <p class="font-semibold">3. Wat gebeur wanneer blokke aan mekaar raak?</p>
            <ul class="list-disc pl-6">
              <li><strong>Dieselfde letter:</strong> As twee blokke met dieselfde LETTER langs of op mekaar tot stilstand kom, verdwyn albei.</li>
              <li><strong>Dieselfde kleur:</strong> As twee blokke met dieselfde KLEUR langs of op mekaar tot stilstand kom, verdwyn albei.</li>
              <li><strong>MAAR:</strong> 'n Blok met 'n letter wat in die teikenwoord is, verdwyn nooit nie.</li>
            </ul>
          </li>
          <li>
            <p class="font-semibold">4. Leierbord</p>
            <p>As jou tyd vinnig genoeg is, verskyn jou naam op die <strong>leierbord</strong>. Gebruik <strong>DEEL</strong> om jou vriende uit te daag en jou tyd te wys.</p>
          </li>
        </ol>
      </section>

      <!-- LEADERBOARD -->
      <section class="card mt-6 p-4">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-xl font-bold">Vandag se bestes:</h2>
        </div>
        <ul id="leaderboardList" class="text-gray-700 text-left"><li>Laai...</li></ul>
      </section>
    </div>
  </main>

  <footer class="bg-white shadow p-4 text-center text-sm text-gray-500">
    &copy; 2025 Kriptiek. Alle regte voorbehou. |
    <a href="/index.html" class="underline">Tuis</a> |
    <a href="/profile.html" class="underline">My profiel</a> |
    <a href="/forum.html" class="underline">Gesels saam</a> |
    <a href="/privacy.html" class="underline">Privaatheidsbeleid</a> |
    <a href="/terms.html" class="underline">Voorwaardes</a> |
    <a href="/faq.html" class="underline">Gereelde vrae</a> |
    <a href="/about.html" class="underline">Oor Kriptiek</a> |
    <a href="/contact.html" class="underline">Kontak ons</a>
  </footer>
